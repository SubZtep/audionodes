(this.webpackJsonpsynth=this.webpackJsonpsynth||[]).push([[0],{16:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return i}));var a=n(13),r=n(9),o=function(e,t){return e===t},c=function(e){var t;return+(null===(t=e.filter((function(e){return Object(a.j)(e)})).filter((function(e){return e.id!==r.a})).sort((function(e,t){return+t.id-+e.id}))[0])||void 0===t?void 0:t.id)+1||1},i=function(e){return Object.keys(e).some((function(e){return"destination"===e}))}},18:function(e,t,n){"use strict";var a=n(10),r=n(4),o=n(1),c=n(0);function i(){var e=Object(r.a)(["\n  border-top: 2px solid #000;\n  // background-color: #11151c !important;\n  background: linear-gradient(0deg, #000 0%, #11151c 100%);\n  color: #d66853 !important;\n  font-family: Tomorrow;\n  font-size: 0.75rem;\n  font-weight: 500;\n  text-align: center;\n  padding: 2px 0 4px;\n  cursor: pointer;\n"]);return i=function(){return e},e}var u=Object(o.c)(i());t.a=function(e){var t=e.title,n=e.children,r=Object(c.useState)(!0),i=Object(a.a)(r,2),d=i[0],l=i[1];return Object(o.d)(c.Fragment,null,Object(o.d)("div",{css:u,onClick:function(){return l(!d)}},t),d&&n)}},37:function(e,t,n){"use strict";(function(e){var a=n(21),r=n.n(a),o=n(25),c=n(10),i=n(1),u=n(14),d=n(0),l=n(2),s=n(7),f=n(8),b=n(18),p=n(5),O=n(9),m=n(44);t.a=function(){var t=Object(d.useRef)(null),n=Object(l.b)(),a=Object(l.c)(p.h),j=function(e,t){localStorage.clear();var a=JSON.parse(e);Object.entries(a).forEach((function(e){var t=Object(c.a)(e,2),a=t[0],r=t[1];"sequencer"===a?(n(Object(p.o)(r.BPM)),n(Object(p.r)(r.notesPerBeat)),n(Object(p.q)(r.beatsPerBar)),n(Object(p.p)(r.bars))):localStorage.setItem(a,JSON.stringify(r))})),n(Object(p.d)()),u.c.info("".concat(null!==t&&void 0!==t?t:"File"," loaded"))},v=function(e){var t=e.target.files;if(1===t.length){var n=t[0],a=new FileReader;a.onload=function(){j(a.result,n.name)},a.readAsText(n)}},g=function(){var e=Object(o.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="Synth-1597604407952.json",e.prev=1,e.next=4,fetch("".concat(window.location.pathname,"/samples/").concat(t));case 4:if(!(n=e.sent).ok){e.next=12;break}return e.t0=j,e.next=9,n.text();case 9:e.t1=e.sent,e.t2=t,(0,e.t0)(e.t1,e.t2);case 12:e.next=17;break;case 14:e.prev=14,e.t3=e.catch(1),u.c.error("".concat(t," failed to load. ").concat(e.t3));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}();Object(d.useEffect)((function(){t.current.onchange=v,0===localStorage.length&&g()}),[]);var h=function(e,t){var n=window.URL.createObjectURL(e),a=document.createElement("a");document.body.appendChild(a),a.style.display="none",a.href=n,a.download=t,a.click(),window.URL.revokeObjectURL(n),a.remove()};return Object(i.d)(b.a,{title:"File System"},Object(i.d)("div",null,Object(i.d)(f.a,{onClick:function(){return t.current.click()}},Object(i.d)(s.a,{icon:["fad","folder-open"],fixedWidth:!0,size:"lg"})),Object(i.d)(f.a,{onClick:function(){var e={};if(Object.keys(localStorage).map((function(t){e[t]=JSON.parse(localStorage.getItem(t))})),e){var t=new Blob([JSON.stringify(e,null,2)],{type:"application/json;charset=utf-8"});h(t,"Synth-".concat((new Date).getTime(),".json"))}},title:"Save To File"},Object(i.d)(s.a,{icon:["fad","save"],fixedWidth:!0,size:"lg"})),Object(i.d)(f.a,{onClick:function(){var t=new OfflineAudioContext(2,5*O.b.sampleRate,O.b.sampleRate),n={};Object.values(a).forEach((function(e){n[e.soundName]=Object(O.c)(e.soundName,t),setTimeout((function(){n[e.soundName].play(440)}),1500),n[e.soundName].play(440)})),t.oncomplete=function(t){h(new Blob([e.from(Object(m.a)(2,44100,32,t.renderedBuffer.length)),t.renderedBuffer.getChannelData(0)]),"lol.wav")},t.startRendering()}},Object(i.d)(s.a,{icon:["fad","file-music"],fixedWidth:!0,size:"lg"})),Object(i.d)("input",{type:"file",ref:t,css:{display:"none"}})))}}).call(this,n(63).Buffer)},44:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:48e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:44,r=new ArrayBuffer(44),o=new DataView(r),c=0,i=function(e){o.setUint16(c,e,!0),c+=2},u=function(e){o.setUint32(c,e,!0),c+=4};return u(1179011410),u(a-8),u(1163280727),u(544501094),u(16),i(3),i(e),u(t),u(t*e*n/8),i(e*n/8),i(n),u(1635017060),u(a-44),r}},5:function(e,t,n){"use strict";n.d(t,"o",(function(){return m})),n.d(t,"r",(function(){return j})),n.d(t,"q",(function(){return v})),n.d(t,"p",(function(){return g})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return y})),n.d(t,"t",(function(){return x})),n.d(t,"s",(function(){return w})),n.d(t,"d",(function(){return k})),n.d(t,"e",(function(){return N})),n.d(t,"f",(function(){return S})),n.d(t,"j",(function(){return T})),n.d(t,"i",(function(){return C})),n.d(t,"g",(function(){return E})),n.d(t,"h",(function(){return A})),n.d(t,"n",(function(){return B})),n.d(t,"m",(function(){return F})),n.d(t,"k",(function(){return P})),n.d(t,"l",(function(){return q}));var a,r,o,c,i=n(10),u=n(68),d=n(20),l=n(16),s=function(){return Object.keys(localStorage).filter((function(e){var t;try{t=JSON.parse(localStorage[e])}catch(n){return!1}return Object(l.c)(t)}))},f=null!==localStorage.getItem("sequencer")?JSON.parse(localStorage.getItem("sequencer")):{},b={BPM:null!==(a=f.BPM)&&void 0!==a?a:140,notesPerBeat:null!==(r=f.notesPerBeat)&&void 0!==r?r:4,beatsPerBar:null!==(o=f.beatsPerBar)&&void 0!==o?o:4,bars:null!==(c=f.bars)&&void 0!==c?c:{},soundNames:s()},p=Object(d.b)({name:"sounds",initialState:b,reducers:{setBPM:function(e,t){var n=t.payload;e.BPM=n},setNotesPerBeat:function(e,t){var n=t.payload;e.notesPerBeat=n;var a=e.notesPerBeat*e.beatsPerBar;Object.values(e.bars).forEach((function(e){var t=e.steps.length;e.steps.length=a,e.steps.fill(null,t)}))},setBeatsPerBar:function(e,t){var n=t.payload;e.beatsPerBar=n;var a=e.notesPerBeat*e.beatsPerBar;Object.values(e.bars).forEach((function(e){var t=e.steps.length;e.steps.length=a,e.steps.fill(null,t)}))},setBars:function(e,t){var n=t.payload;e.bars=n},addBar:function(e,t){t.payload;e.bars[Object(u.a)()]={soundName:"",steps:new Array(e.notesPerBeat*e.beatsPerBar).fill(null)}},delBar:function(e,t){var n=t.payload;delete e.bars[n]},setStep:function(e,t){var n=t.payload;e.bars[n.barId].steps[n.stepNr]=n.step},setSoundName:function(e,t){var n=t.payload;e.bars[n.barId].soundName=n.soundName},refreshSoundNames:function(e){e.soundNames=s()},resetSoundsState:function(e){Object.entries(b).forEach((function(t){var n=Object(i.a)(t,2),a=n[0],r=n[1];e[a]=r}))}}}),O=p.actions,m=O.setBPM,j=O.setNotesPerBeat,v=O.setBeatsPerBar,g=O.setBars,h=O.addBar,y=O.delBar,x=O.setStep,w=O.setSoundName,k=O.refreshSoundNames,N=O.resetSoundsState,S=function(e){return e.sounds.BPM},T=function(e){return e.sounds.notesPerBeat},C=function(e){return e.sounds.beatsPerBar},E=function(e){var t=e.sounds;return Object.keys(t.bars)},A=function(e){return e.sounds.bars},B=function(e){var t=e.sounds;return t.notesPerBeat*t.beatsPerBar},F=function(e){var t=e.sounds;return function(e){return t.bars[e].steps}},P=function(e){var t=e.sounds;return function(e){return t.bars[e].soundName}},q=function(e){return e.sounds.soundNames};t.b=p.reducer},50:function(e,t,n){e.exports=n(67)},67:function(e,t,n){"use strict";n.r(t);var a=n(15),r=n.n(a),o=n(2),c=n(0),i=n.n(c),u=n(1),d=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function l(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var s=n(47),f=n(49),b=n(45),p=n(46),O=n(48),m=n(26),j=(n(60),n(8)),v=n(11),g=n(20),h=n(6),y=n(4),x=n(12);function w(){var e=Object(y.a)(["\n  font-size: 0.8rem;\n  color: #999;\n  word-spacing: -1px;\n\n  button {\n    margin-left: 6px;\n  }\n"]);return w=function(){return e},e}function k(){var e=Object(y.a)(["\n  font-weight: 100;\n"]);return k=function(){return e},e}function N(){var e=Object(y.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 6px;\n  font-size: 0.95rem;\n  line-height: 1.35rem;\n"]);return N=function(){return e},e}function S(){var e=Object(y.a)(["\n  border: 0;\n  background: transparent;\n  color: #f33;\n  font-size: 0.7rem;\n  padding: 0;\n"]);return S=function(){return e},e}function T(){var e=Object(y.a)(["\n  margin: 15px 0 10px 0;\n  border: 0;\n  border-bottom: 1px dashed var(--node-bg);\n"]);return T=function(){return e},e}function C(){var e=Object(y.a)(["\n  font-family: Tomorrow, sans-serif;\n  font-style: normal;\n  font-weight: 500;\n  font-size: 1.1rem;\n  margin: 12px 0;\n  &:first-of-type {\n    margin-top: 0;\n  }\n"]);return C=function(){return e},e}function E(){var e=Object(y.a)(["\n  font-family: Tomorrow, sans-serif;\n  font-style: normal;\n  font-weight: 400;\n  text-align: center;\n  font-size: 1.2rem;\n  margin: 2px 0 5px;\n"]);return E=function(){return e},e}function A(){var e=Object(y.a)(["\n  display: grid;\n  gap: 2px;\n  grid-template-columns: 0.8fr 1fr;\n  align-items: center;\n}\n"]);return A=function(){return e},e}function B(){var e=Object(y.a)(["\n  table {\n    select, input {\n      padding: 2px;\n      width: 60px;\n      &:focus {\n        padding: 1px;\n      }\n    }\n  }\n}\n"]);return B=function(){return e},e}function F(){var e=Object(y.a)(["\n  padding: 4px 6px;\n  border-radius: 3px 3px 2px 2px;\n  background-color: #364156;\n  // font-weight: 300;\n\n  input,\n  select,\n  button {\n    font-size: 0.95rem;\n    flex-grow: 1;\n    border-radius: 3px;\n    background-color: transparent;\n    border: 1px solid var(--input-border);\n    font-family: Roboto;\n    padding: 6px;\n    color: #fff;\n    &:focus {\n      border-color: var(--input-border-focus);\n      border-width: 2px;\n      padding: 5px;\n    }\n  }\n\n  select option {\n    background-color: var(--widget-bg);\n  }\n\n  button {\n    width: 100%;\n    background-color: var(--button-bg);\n    border-width: 2px;\n    border-style: outset;\n    cursor: pointer;\n    &:focus {\n      padding: 6px;\n    }\n  }\n"]);return F=function(){return e},e}var P=x.a.div(F()),q=x.a.div(B()),I=(Object(x.a)(q)(A()),x.a.div(E())),V=x.a.div(C()),R=x.a.hr(T()),z=(x.a.button(S()),x.a.div(N())),M=x.a.span(k()),_=x.a.div(w()),W=n(10),G=function(e){var t=Object(c.useState)("OscillatorNode"===e?0:1),n=Object(W.a)(t,1)[0],a=Object(c.useState)(1),r=Object(W.a)(a,1)[0],o=Object(c.useState)((function(){switch(e){case"BiquadFilterNode":return{frequency:{automationRate:"a-rate",minValue:10,maxValue:24e3,defaultValue:350},detune:{automationRate:"a-rate",defaultValue:0,minValue:-153600,maxValue:153600},Q:{automationRate:"a-rate",defaultValue:1,minValue:1e-4,maxValue:1e3},gain:{automationRate:"a-rate",defaultValue:0,minValue:-40,maxValue:40}};case"GainNode":return{gain:{automationRate:"a-rate",minValue:0,maxValue:1,defaultValue:1}};case"OscillatorNode":return{frequency:{automationRate:"a-rate",minValue:-24e3,maxValue:24e3,defaultValue:440},detune:{automationRate:"a-rate",defaultValue:0,minValue:-153600,maxValue:153600}}}return{}}));return{numberOfInputs:n,numberOfOutputs:r,audioParams:Object(W.a)(o,1)[0]}},L=Object(g.b)({name:"ux",initialState:{menu:!1,editMode:!0,loadElements:null,delSelected:!1,sideLeft:!1},reducers:{toggleMenu:function(e){e.menu=!e.menu},toggleEditMode:function(e){e.editMode=!e.editMode},toggleDelSelected:function(e){e.delSelected=!e.delSelected},toggleSideLeft:function(e){e.sideLeft=!e.sideLeft},setLoadElements:function(e,t){var n=t.payload;e.loadElements=n}}}),D=function(e){return e.ux.menu},J=function(e){return e.ux.editMode},U=function(e){return e.ux.delSelected},H=function(e){return e.ux.sideLeft},K=function(e){return e.ux.loadElements},Q=L.actions,X=Q.toggleMenu,Z=Q.toggleEditMode,$=Q.toggleDelSelected,Y=Q.toggleSideLeft,ee=Q.setLoadElements,te=L.reducer,ne=n(13),ae=Object(c.memo)((function(e){var t=e.numberOfOutputs;return i.a.createElement(c.Fragment,null,new Array(t).fill(0).map((function(e,n){return i.a.createElement(ne.d,{key:"output".concat(n),type:"source",position:ne.e.Bottom,style:{left:"".concat(100/(t+1)*(n+1),"%")}})})))})),re=Object(c.memo)((function(e){var t=e.numberOfInputs;return i.a.createElement(c.Fragment,null,new Array(t).fill(0).map((function(e,n){return i.a.createElement(ne.d,{key:"input".concat(n),type:"target",position:ne.e.Top,style:{left:"".concat(100/(t+1)*(n+1),"%")}})})))})),oe=[32,64,128,256,512,1024,2048,4096,8192,16384,32768],ce=Object(g.b)({name:"activeSound",initialState:{name:"",playFrequency:null,analysers:[],gains:[],biquadFilters:[],oscillators:[]},reducers:{setName:function(e,t){var n=t.payload;e.name=n},setPlayFrequency:function(e,t){var n=t.payload;e.playFrequency=n},addConnect:function(e,t){var n,a=t.payload;null===(n=[e.analysers,e.gains,e.biquadFilters,e.oscillators].flat().find((function(e){return e.id===a.source})))||void 0===n||n.connectIds.push(a.target)},delConnect:function(e,t){var n=t.payload,a=[e.analysers,e.gains,e.biquadFilters,e.oscillators].flat().find((function(e){return e.id===n.source}));void 0!==a&&(a.connectIds=a.connectIds.filter((function(e){return e!==n.target})))},emptyNodes:function(e){e.analysers=[],e.gains=[],e.biquadFilters=[],e.oscillators=[]},setAnalyser:function(e,t){var n=t.payload,a=e.analysers.findIndex((function(e){return e.id===n.id}));-1===a?e.analysers.push(n):e.analysers[a]=n},delAnalyser:function(e,t){var n=t.payload;e.analysers=e.analysers.filter((function(e){return e.id!==n}))},setGain:function(e,t){var n=t.payload,a=e.gains.findIndex((function(e){return e.id===n.id}));-1===a?e.gains.push(n):e.gains[a]=n},delGain:function(e,t){var n=t.payload;e.gains=e.gains.filter((function(e){return e.id!==n}))},setBiquadFilter:function(e,t){var n=t.payload,a=e.biquadFilters.findIndex((function(e){return e.id===n.id}));-1===a?e.biquadFilters.push(n):e.biquadFilters[a]=n},delBiquadFilter:function(e,t){var n=t.payload;e.biquadFilters=e.biquadFilters.filter((function(e){return e.id!==n}))},setOscillator:function(e,t){var n=t.payload,a=e.oscillators.findIndex((function(e){return e.id===n.id}));-1===a?e.oscillators.push(n):e.oscillators[a]=n},delOscillator:function(e,t){var n=t.payload;e.oscillators=e.oscillators.filter((function(e){return e.id!==n}))}}}),ie=function(e){return e.activeSound.name},ue=function(e){var t=e.activeSound;return{analysers:t.analysers,gains:t.gains,biquadFilters:t.biquadFilters,oscillators:t.oscillators}},de=function(e){var t=e.activeSound;return function(e){return t.analysers.find((function(t){return t.id===e}))}},le=function(e){return e.activeSound.analysers},se=function(e){var t=e.activeSound;return function(e){return t.gains.find((function(t){return t.id===e}))}},fe=function(e){var t=e.activeSound;return function(e){return t.biquadFilters.find((function(t){return t.id===e}))}},be=function(e){var t=e.activeSound;return function(e){return t.oscillators.find((function(t){return t.id===e}))}},pe=ce.actions,Oe=pe.setName,me=pe.setPlayFrequency,je=pe.addConnect,ve=pe.delConnect,ge=pe.emptyNodes,he=pe.setAnalyser,ye=pe.delAnalyser,xe=pe.setGain,we=pe.delGain,ke=pe.setBiquadFilter,Ne=pe.delBiquadFilter,Se=pe.setOscillator,Te=pe.delOscillator,Ce=ce.reducer,Ee=n(9),Ae=function(){return function(e){return function(t){if(t.type.startsWith("activeSound/")&&!t.type.endsWith("setName"))switch(t.type.substring(t.type.indexOf("/")+1)){case"emptyNodes":Ee.d.destroyAudioNodes();break;case"setGain":Ee.d.setGain(t.payload);break;case"setAnalyser":Ee.d.setAnalyser(t.payload);break;case"setBiquadFilter":Ee.d.setBiquadFilter(t.payload);break;case"setOscillator":Ee.d.setOscillator(t.payload);break;case"delGain":case"delAnalyser":case"delBiquadFilter":case"delOscillator":Ee.d.delNode(t.payload);break;case"addConnect":Ee.d.addConnect(t.payload.source,t.payload.target);break;case"delConnect":Ee.d.delConnect(t.payload.source,t.payload.target);break;case"setPlayFrequency":null===t.payload?Ee.d.stop():Ee.d.play(t.payload)}e(t)}}},Be=n(5),Fe=Object(g.a)({reducer:{activeSound:Ce,sounds:Be.b,ux:te},middleware:[].concat(Object(v.a)(Object(g.c)()),[Ae])}),Pe=n(43),qe=n(14),Ie=n(7);function Ve(){var e=Object(y.a)(["\n  background-color: #742a1b;\n"]);return Ve=function(){return e},e}function Re(){var e=Object(y.a)(["\n  background-color: #455e87;\n"]);return Re=function(){return e},e}function ze(){var e=Object(y.a)(["\n  position: absolute;\n  gap: 2px;\n  top: 8px;\n  right: 10px;\n  z-index: 4;\n  display: flex;\n  flex-direction: column;\n  .text {\n    overflow: hidden;\n    white-space: nowrap;\n    width: 0;\n    transition: 60ms;\n  }\n  &:hover .text {\n    width: 165px;\n    transition: 120ms;\n  }\n"]);return ze=function(){return e},e}function Me(){var e=Object(y.a)(["\n  background-color: #364156;\n  border-color: #7d4e57;\n  color: #fff;\n  font-family: Tomorrow;\n  font-size: 0.85rem;\n  border-radius: 3px;\n  padding: 4px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  svg {\n    transition: 50ms;\n  }\n  &:hover svg {\n    transition: 50ms;\n    transform: scale(1.25);\n  }\n"]);return Me=function(){return e},e}function _e(){var e=Object(y.a)(["\n  .react-flow__node.audioNode {\n    box-shadow: 1px 1px 4px 1px #333;\n  }\n"]);return _e=function(){return e},e}function We(){var e=Object(y.a)(["\n  .react-flow__node.audioNode {\n    cursor: default;\n  }\n"]);return We=function(){return e},e}function Ge(){var e=Object(y.a)(["\n  .react-flow {\n    background-color: var(--graph-bg);\n    resize: horizontal;\n    min-width: 80px;\n    width: calc(100% - var(--side-default-width));\n  }\n\n  .react-flow__node.audioNode {\n    min-width: 165px;\n    border-radius: 4px;\n    background-color: var(--node-bg);\n    color: #fff;\n    padding: 3px;\n\n    &.selected {\n      border: 2px solid var(--node-selected-border);\n      padding: 1px;\n    }\n\n    &.output {\n      font-family: Tomorrow;\n      font-size: 1rem;\n      padding: 8px;\n    }\n  }\n\n  .react-flow__handle {\n    width: 0.92rem;\n    height: 0.92rem;\n    &.react-flow__handle-top {\n      top: -0.64rem;\n      background-color: #e62020;\n    }\n    &.react-flow__handle-bottom {\n      bottom: -0.64rem;\n      background-color: #74c365;\n    }\n  }\n  .react-flow__edge {\n    .react-flow__edge-path {\n      stroke-width: 2;\n      stroke: #7d4e57;\n    }\n    &.selected .react-flow__edge-path {\n      stroke-width: 3;\n      stroke: #d66853;\n    }\n  }\n  .react-flow__controls-button {\n    width: 25px;\n    height: 25px;\n    opacity: 0.5;\n  }\n"]);return Ge=function(){return e},e}var Le=Object(u.c)(Ge()),De=Object(u.c)(We()),Je=Object(u.c)(_e()),Ue=x.a.button(Me()),He=x.a.div(ze()),Ke=Object(x.a)(Ue)(Re()),Qe=Object(x.a)(Ue)(Ve()),Xe=function(e){var t=e.icon,n=e.onClick,a=e.mode,r=void 0===a?"default":a,o=e.children;switch(r){case"mode":return Object(u.d)(Ke,{onClick:n},Object(u.d)("div",{className:"text"},o),Object(u.d)(Ie.a,{fixedWidth:!0,icon:t,size:"lg"}));case"del":return Object(u.d)(Qe,{onClick:n},Object(u.d)("div",{className:"text"},o),Object(u.d)(Ie.a,{fixedWidth:!0,icon:t,size:"lg"}));default:return Object(u.d)(Ue,{onClick:n},Object(u.d)("div",{className:"text"},o),Object(u.d)(Ie.a,{fixedWidth:!0,icon:t,size:"lg"}))}},Ze=n(16),$e=function(e,t){return Math.random()*(t-e)+e},Ye=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=t/2;return{x:$e(0,e-200),y:n?$e(a,t):$e(0,a)}},et=function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g," "),t.join(".")},tt=function(e){var t=e.audioParams,n=e.addParam,a=e.hideButton;return Object(u.d)(c.Fragment,null,Object(u.d)(V,null,"Defaults"),Object.entries(t).map((function(e){var t=Object(W.a)(e,2),r=t[0],o=t[1];return Object(u.d)(z,{key:r},Object(u.d)("div",null,Object(u.d)(M,null,r,":")," ",o.defaultValue),Object(u.d)(_,null,o.minValue<=Number.MIN_SAFE_INTEGER?"\u221e":et(o.minValue)," \u2014"," ",o.maxValue>=Number.MAX_SAFE_INTEGER?"\u221e":et(o.maxValue),!a&&Object(u.d)(j.a,{onClick:function(){return n(r,o.defaultValue)}},Object(u.d)(Ie.a,{icon:["fad","layer-plus"],size:"lg"}))))})))},nt=function(e){var t=e.params,n=e.showCoord,a=Object(c.useState)(0),r=Object(W.a)(a,2),o=r[0],i=r[1],d=Object(c.useState)(0),l=Object(W.a)(d,2),s=l[0],f=l[1],b=Object(c.useState)(0),p=Object(W.a)(b,2),O=p[0],m=p[1],j=Object(c.useState)([]),g=Object(W.a)(j,2),h=g[0],y=g[1];return Object(c.useEffect)((function(){if(n){var e=t.map((function(e){return e.values})).flat(2);f(Math.min.apply(Math,Object(v.a)(e))),m(Math.max.apply(Math,Object(v.a)(e)));var a=[];i(t.reduce((function(e,t){var n,r=e;switch(t.call){case"setValueAtTime":case"linearRampToValueAtTime":case"exponentialRampToValueAtTime":n=t.values[0],r+=t.values[1];break;case"setTargetAtTime":n=t.values[0],r+=t.values[2];break;case"setValueCurveAtTime":n=Math.max.apply(Math,Object(v.a)(t.values[0])),r+=t.values[2]}return a.push({time:r,value:n}),r}),0)),y(a)}}),[t,n]),0===t.length?Object(u.d)(c.Fragment,null):Object(u.d)(c.Fragment,null,Object(u.d)(V,null,"Adjusted Params"),n&&o>0&&Object(u.d)("div",null,Object(u.d)("svg",{viewBox:"0 0 ".concat(o," ").concat(s+O),css:{width:"100%",height:50,boxShadow:"inset 0 0 25px red"}},h.map((function(e){return Object(u.d)("circle",{key:JSON.stringify(e),cx:e.time,cy:e.value,r:(s+O)/10,fill:"#11151c"})}))),Object(u.d)("div",{css:{fontSize:"0.8rem",color:"#D66853",marginTop:-18}},"maxTime: ",o,", minValue: ",s,", maxValue: ",O)),t.map((function(e,t){return Object(u.d)(z,{key:JSON.stringify(e)+t.toString()},Object(u.d)("div",null,Object(u.d)(M,null,e.name,":")," ",e.values.join(", ")),Object(u.d)(_,null,e.call))})))},at=["setValueAtTime","linearRampToValueAtTime","exponentialRampToValueAtTime","setTargetAtTime","setValueCurveAtTime"],rt=function(e){var t,n=e.audioParams,a=e.name,r=e.call,o=e.values,i=e.onChange,d=function(e){var t=+e.currentTarget.getAttribute("data-nth"),n=e.currentTarget.valueAsNumber;if(!Number.isNaN(n)){var a=Object(v.a)(o);a[t]=n,i({values:a})}},l=function(e){return o[e]};return Object(u.d)(c.Fragment,null,Object(u.d)("td",null,Object(u.d)("select",{value:a,onChange:function(e){return i({name:e.currentTarget.value})}},Object.keys(n).map((function(e){return Object(u.d)("option",{key:e,value:e},e)})))),Object(u.d)("td",null,Object(u.d)("select",{value:r,onChange:function(e){return i({call:e.currentTarget.value})}},at.map((function(e){return Object(u.d)("option",{key:e,value:e},e)})))),["setValueAtTime","linearRampToValueAtTime","exponentialRampToValueAtTime"].includes(r)&&Object(u.d)(c.Fragment,null,Object(u.d)("td",null,Object(u.d)("input",{type:"number",value:l(0),step:.1,"data-nth":0,onChange:d})),Object(u.d)("td",null,Object(u.d)("input",{type:"number",value:l(1),step:.1,min:0,"data-nth":1,onChange:d}))),["setTargetAtTime"].includes(r)&&Object(u.d)(c.Fragment,null,Object(u.d)("td",null,Object(u.d)("input",{type:"number",value:l(0),"data-nth":0,onChange:d})),Object(u.d)("td",null,Object(u.d)("label",null),Object(u.d)("input",{type:"number",value:l(1),"data-nth":1,onChange:d,title:"startTime (t+)"}),Object(u.d)("input",{type:"number",value:l(2),"data-nth":2,onChange:d,title:"timeConstant"}))),["setValueCurveAtTime"].includes(r)&&Object(u.d)(c.Fragment,null,Object(u.d)("td",null,Object(u.d)("input",{type:"text",value:(t=0,Array.isArray(o[t])?o[t].join(","):o[t].toString()),"data-nth":0,onChange:function(e){var t=+e.currentTarget.getAttribute("data-nth"),n=e.currentTarget.value.split(",").map((function(e){return+e})),a=Object(v.a)(o);a[t]=n,i({values:a})},title:"values (comma separated)"})),Object(u.d)("td",null,Object(u.d)("input",{type:"number",value:l(1),"data-nth":1,onChange:d,title:"startTime (t+)"}),Object(u.d)("input",{type:"number",value:l(2),"data-nth":2,onChange:d,title:"duration"}))))},ot=function(e){var t=e.audioParams,n=e.params,a=e.setParams;return Object(u.d)(c.Fragment,null,Object(u.d)("table",null,Object(u.d)("thead",null,Object(u.d)("tr",null,Object(u.d)("th",null,Object(u.d)(Ie.a,{icon:["fad","piano-keyboard"],title:"Param Name"})),Object(u.d)("th",null,Object(u.d)(Ie.a,{icon:["fad","waveform-path"],title:"Call Type"})),Object(u.d)("th",null,Object(u.d)(Ie.a,{icon:["fad","sliders-h"],title:"Value"})),Object(u.d)("th",null,Object(u.d)(Ie.a,{icon:["fad","hourglass-start"],title:"Start (time+)"})),Object(u.d)("th",null))),Object(u.d)("tbody",null,n.map((function(e,r){return Object(u.d)("tr",{key:e.name+e.call+r},Object(u.d)(rt,Object.assign({audioParams:t},e,{onChange:function(e){return function(e,t){var r=Object(v.a)(n);if(void 0!==t.call){var o=["setValueAtTime","linearRampToValueAtTime","exponentialRampToValueAtTime"];o.includes(t.call)&&(o.includes(r[e].call)||(t.values=[0,0])),["setTargetAtTime"].includes(t.call)&&(t.values=[0,0,0]),["setValueCurveAtTime"].includes(t.call)&&(t.values=[[0],0,0])}r[e]=Object(h.a)(Object(h.a)({},r[e]),t),a(r)}(r,e)}})),Object(u.d)("td",null,Object(u.d)(j.a,{onClick:function(){return function(e){var t=Object(v.a)(n);t.splice(e,1),a(t)}(r)}},Object(u.d)(Ie.a,{icon:["fad","trash"]}))))})))))},ct=["allpass","bandpass","highpass","highshelf","lowpass","lowshelf","notch","peaking"],it=["sine","square","sawtooth","triangle"],ut=function(e){var t=e.addAudioNode,n=e.delSelected,a=Object(o.b)(),r=Object(o.c)(J);return Object(u.d)(He,null,Object(u.d)(Xe,{mode:"mode",onClick:function(){return a(Z())},icon:["fas",r?"edit":"project-diagram"]},r?Object(u.d)(c.Fragment,null,"To View ",Object(u.d)("u",null,"m"),"ode"):Object(u.d)(c.Fragment,null,"To Edit ",Object(u.d)("u",null,"m"),"ode")),Object(u.d)(Xe,{onClick:t("oscillator"),icon:["fad","wave-sine"]},"Add Oscillator"),Object(u.d)(Xe,{onClick:t("gain"),icon:["fad","volume"]},"Add Gain"),Object(u.d)(Xe,{onClick:t("biquadfilter"),icon:["fad","filter"]},"Add Biquad Filter"),Object(u.d)(Xe,{onClick:t("analyser"),icon:["fad","analytics"]},"Add Analyser"),Object(u.d)(Xe,{mode:"del",onClick:n,icon:["fad","trash-alt"]},"Remove Selected"))},dt={biquadfilter:function(e){var t=e.id,n=e.data,a=Object(c.useMemo)((function(){var e,a,r;return{id:t,connectIds:null!==(e=null===n||void 0===n?void 0:n.connectIds)&&void 0!==e?e:[],type:null!==(a=null===n||void 0===n?void 0:n.type)&&void 0!==a?a:"lowpass",params:null!==(r=null===n||void 0===n?void 0:n.params)&&void 0!==r?r:[]}}),[t,n]),r=Object(o.c)(J),i=G("BiquadFilterNode"),d=Object(o.b)(),l=Object(o.c)(fe)(t)||a;Object(c.useEffect)((function(){return d(ke(l)),function(){d(Ne(t))}}),[]);var s=function(e){d(ke(Object(h.a)(Object(h.a)({},l),{},{type:e.currentTarget.value})))},f=function(e){d(ke(Object(h.a)(Object(h.a)({},l),{},{params:e})))};return Object(u.d)(c.Fragment,null,Object(u.d)(re,{numberOfInputs:i.numberOfInputs}),Object(u.d)(I,null,"Biquad Filter #",t),Object(u.d)(P,null,r?Object(u.d)(c.Fragment,null,Object(u.d)(tt,{audioParams:i.audioParams,addParam:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=Object(v.a)(l.params);n.push({name:e||Object.keys(i.audioParams)[0],call:"setValueAtTime",values:[t,0]}),f(n)}}),Object(u.d)(V,null,"Type"),Object(u.d)(q,null,Object(u.d)("div",{css:{columnCount:2,fontWeight:300,textTransform:"capitalize"}},ct.map((function(e){return Object(u.d)("label",{key:e,css:{display:"block"}},Object(u.d)("input",{type:"radio",defaultValue:e,checked:l.type===e,onChange:s}),e)}))),l.params.length>0&&Object(u.d)(c.Fragment,null,Object(u.d)(R,null),Object(u.d)(ot,{audioParams:i.audioParams,params:l.params,setParams:f})))):Object(u.d)("div",null,Object(u.d)(z,{css:{textTransform:"capitalize"}},Object(u.d)(M,null,"Type:")," ",l.type),Object(u.d)(nt,{params:l.params}))),Object(u.d)(ae,{numberOfOutputs:i.numberOfOutputs}))},oscillator:function(e){var t=e.id,n=e.data,a=Object(c.useMemo)((function(){var e,a,r;return{id:t,connectIds:null!==(e=null===n||void 0===n?void 0:n.connectIds)&&void 0!==e?e:[],type:null!==(a=null===n||void 0===n?void 0:n.type)&&void 0!==a?a:it[0],params:null!==(r=null===n||void 0===n?void 0:n.params)&&void 0!==r?r:[]}}),[t,n]),r=Object(o.c)(J),i=G("OscillatorNode"),d=Object(o.b)(),l=Object(o.c)(be)(t)||a;Object(c.useEffect)((function(){return d(Se(l)),function(){d(Te(t))}}),[]);var s=function(e){d(Se(Object(h.a)(Object(h.a)({},l),{},{type:e.currentTarget.value})))},f=function(e){d(Se(Object(h.a)(Object(h.a)({},l),{},{params:e})))};return Object(u.d)(c.Fragment,null,i.numberOfInputs>0&&Object(u.d)(re,{numberOfInputs:i.numberOfInputs}),Object(u.d)(I,null,"Oscillator #",t),Object(u.d)(P,null,r?Object(u.d)(c.Fragment,null,Object(u.d)(tt,{audioParams:i.audioParams,addParam:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=Object(v.a)(l.params);n.push({name:e||Object.keys(i.audioParams)[0],call:"setValueAtTime",values:[t,0]}),f(n)}}),Object(u.d)(V,null,"Type"),Object(u.d)(q,{css:{marginTop:4}},Object(u.d)("div",{css:{columnCount:2,fontWeight:300}},it.map((function(e){return Object(u.d)("label",{key:e,css:{display:"block"}},Object(u.d)("input",{type:"radio",defaultValue:e,checked:l.type===e,onChange:s}),e)}))),l.params.length>0&&Object(u.d)(c.Fragment,null,Object(u.d)(R,null),Object(u.d)(ot,{audioParams:i.audioParams,params:l.params,setParams:f})))):Object(u.d)("div",null,Object(u.d)(z,{css:{textTransform:"capitalize"}},Object(u.d)(M,null,"Type:")," ",l.type),Object(u.d)(nt,{params:l.params}))),Object(u.d)(ae,{numberOfOutputs:i.numberOfOutputs}))},analyser:function(e){var t=e.id,n=e.data,a=Object(c.useMemo)((function(){var e,a,r,o;return{id:t,connectIds:null!==(e=null===n||void 0===n?void 0:n.connectIds)&&void 0!==e?e:[],fftSize:null!==(a=null===n||void 0===n?void 0:n.fftSize)&&void 0!==a?a:oe[6],color:null!==(r=null===n||void 0===n?void 0:n.color)&&void 0!==r?r:"#d66853",lineWidth:null!==(o=null===n||void 0===n?void 0:n.lineWidth)&&void 0!==o?o:2}}),[t,n]),r=Object(o.c)(J),i=G("AnalyserNode"),d=Object(o.b)(),l=Object(o.c)(de)(t)||a;Object(c.useEffect)((function(){return d(he(l)),function(){d(ye(t))}}),[]);return Object(u.d)(c.Fragment,null,Object(u.d)(re,{numberOfInputs:i.numberOfInputs}),Object(u.d)(I,null,"Analyser #",t),Object(u.d)(P,null,r?Object(u.d)(j.e,null,Object(u.d)("div",null,Object(u.d)("label",{htmlFor:"a1".concat(t),css:{flexGrow:1}},"FFT Size"),Object(u.d)("select",{id:"a1".concat(t),value:l.fftSize,onChange:function(e){d(he(Object(h.a)(Object(h.a)({},l),{},{fftSize:+e.currentTarget.value})))}},oe.map((function(e){return Object(u.d)("option",{key:e,value:e},e)})))),Object(u.d)("div",null,Object(u.d)("label",{htmlFor:"a2{id}",css:{flexGrow:1}},"Colour"),Object(u.d)("input",{id:"a2".concat(t),type:"color",value:l.color,onChange:function(e){d(he(Object(h.a)(Object(h.a)({},l),{},{color:e.currentTarget.value})))}})),Object(u.d)("div",null,Object(u.d)("label",{htmlFor:"a3".concat(t),css:{flexGrow:1}},"Line Width"),Object(u.d)("input",{id:"a3".concat(t),type:"range",min:1,max:50,value:l.lineWidth,onChange:function(e){d(he(Object(h.a)(Object(h.a)({},l),{},{lineWidth:e.currentTarget.valueAsNumber})))}}))):Object(u.d)(c.Fragment,null,Object(u.d)(z,null,Object(u.d)(M,null,"FFT Size:")," ",l.fftSize),Object(u.d)(z,null,Object(u.d)(M,null,"Line:"),Object(u.d)("div",{css:{height:l.lineWidth,backgroundColor:l.color,width:"100%"}})))),Object(u.d)(ae,{numberOfOutputs:i.numberOfOutputs}))},gain:function(e){var t=e.id,n=e.data,a=Object(c.useMemo)((function(){var e,a;return{id:t,connectIds:null!==(e=null===n||void 0===n?void 0:n.connectIds)&&void 0!==e?e:[],params:null!==(a=null===n||void 0===n?void 0:n.params)&&void 0!==a?a:[]}}),[t,n]),r=Object(o.c)(J),i=G("GainNode"),d=Object(o.b)(),l=Object(o.c)(se)(t)||a;Object(c.useEffect)((function(){return d(xe(l)),function(){d(we(t))}}),[]);var s=function(e){d(xe(Object(h.a)(Object(h.a)({},l),{},{params:e})))};return Object(u.d)(c.Fragment,null,Object(u.d)(re,{numberOfInputs:i.numberOfInputs}),Object(u.d)(I,null,"Gain #",t),Object(u.d)(P,null,(r||0===l.params.length)&&Object(u.d)(tt,{audioParams:i.audioParams,addParam:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=Object(v.a)(l.params);n.push({name:e||Object.keys(i.audioParams)[0],call:"setValueAtTime",values:[t,0]}),s(n)},hideButton:!r}),Object(u.d)(nt,{params:l.params,showCoord:!0}),r&&Object(u.d)(c.Fragment,null,l.params.length>0&&Object(u.d)(q,null,Object(u.d)(R,null),Object(u.d)(ot,{audioParams:i.audioParams,params:l.params,setParams:s})))),Object(u.d)(ae,{numberOfOutputs:i.numberOfOutputs}))}},lt={id:Ee.a,data:{label:"Audio Output"},type:"output",connectable:!0,selectable:!1,position:{x:0,y:0},className:"audioNode output"},st=function(){var e=Object(o.b)(),t=Object(o.c)(K),n=Object(o.c)(J),a=Object(o.c)(U),r=Object(ne.l)((function(e){return e.width}),Ze.a),i=Object(ne.l)((function(e){return e.height}),Ze.a),d=Object(c.useState)([]),l=Object(W.a)(d,2),s=l[0],f=l[1],b=Object(c.useRef)(null),p=Object(c.useRef)(1);Object(c.useEffect)((function(){t&&(f(t),p.current=Object(Ze.b)(t),e(ee(null)))}),[t,e]),Object(c.useEffect)((function(){r>0&&i>0&&0===s.length&&(lt.position={x:r/2,y:i/2},f([lt]))}),[r,i,s]),Object(c.useEffect)((function(){a&&(O(),e($()))}),[a]);var O=function(){null!==b.current&&(f(Object(ne.k)(b.current,s)),b.current.filter((function(e){return Object(ne.i)(e)})).forEach((function(t){e(ve({source:t.source,target:t.target}))})),b.current=null)};return Object(u.d)(c.Fragment,null,Object(u.d)(u.a,{styles:Le}),n?Object(u.d)(u.a,{styles:De}):Object(u.d)(u.a,{styles:Je}),Object(u.d)(ne.h,{elements:s,onConnect:function(t){null!==t.source&&null!==t.target&&(f((function(e){return Object(ne.g)(t,e)})),e(je({source:t.source,target:t.target})))},nodeTypes:dt,nodesDraggable:!n,onSelectionChange:function(e){return b.current=e},snapGrid:[16,16],snapToGrid:!0,onlyRenderVisibleNodes:!1,connectionLineStyle:{stroke:"#71474e"}},Object(u.d)(ne.c,{showInteractive:!1}),Object(u.d)(ne.a,{variant:n?ne.b.Dots:ne.b.Lines,color:"#364156",gap:32,size:1}),Object(u.d)(ut,{addAudioNode:function(e){return function(){return f([].concat(Object(v.a)(s),[{id:(p.current++).toString(),type:e,className:"audioNode",position:Ye(r,i)}]))}},delSelected:O})))},ft=n(21),bt=n.n(ft),pt=n(25),Ot=function(){var e=Object(o.b)(),t=function(){var e=Object(pt.a)(bt.a.mark((function e(t){var n,a;return bt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(window.location.pathname,"/samples/").concat(t,".json"));case 3:if(!(n=e.sent).ok){e.next=9;break}return e.next=7,n.json();case 7:a=e.sent,Object(Ze.c)(a)&&(localStorage.setItem(t,JSON.stringify(a)),qe.c.success("".concat(t," Loaded")));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),qe.c.error("".concat(t," failed to load. ").concat(e.t0));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(u.d)(j.c,{className:"menu",onMouseLeave:function(){return e(X())}},Object(u.d)("h2",null,"MENU"),Object(u.d)("ul",null,Object(u.d)("li",null,"Refresh often because something is not right yet. Load samples below with the buttons and select from the dropdown to have a look. Crash and Refresh. =] (This version only deployed for testing purposes.)"),Object(u.d)("li",null,"Open poorly managed"," ",Object(u.d)("a",{href:"https://github.com/SubZtep/synth/wiki",target:"_blank",rel:"noopener noreferrer"},"Wiki page"),"."),Object(u.d)("li",null,"Preload ",Object(u.d)("button",{onClick:function(){return t("Kick")}},"Kick")," and"," ",Object(u.d)("button",{onClick:function(){return t("HiHat")}},"HiHat \ud83d\udc1b")," sounds to its name in local storage."),Object(u.d)("li",null,Object(u.d)("button",{onClick:function(){return e(Y())}},"Switch")," sidebar position between left and right.")))},mt=function(){var e=Object(o.c)(D),t=Object(o.b)(),n=Object(c.useRef)(null);return Object(u.d)(c.Fragment,null,Object(u.d)(Ie.a,{className:"menuOpener",fixedWidth:!0,icon:["fad","bars"],size:"2x",onMouseEnter:function(){null===n.current&&(n.current=setTimeout((function(){t(X()),n.current=null}),500))},onMouseLeave:function(){null!==n.current&&(clearTimeout(n.current),n.current=null)}}),e&&Object(u.d)(Ot,null))},jt=n(18),vt=function(){var e=Object(o.c)(le),t=Object(c.useRef)(null),n=Object(c.useRef)(),a=Object(c.useRef)(0),r=Object(c.useRef)(0),i=Object(c.useRef)(0),d=Object(c.useRef)(null);Object(c.useEffect)((function(){n.current=t.current.getContext("2d");var e=function(e){var t=+getComputedStyle(e).getPropertyValue("width").slice(0,-2),n=+getComputedStyle(e).getPropertyValue("height").slice(0,-2),a=window.devicePixelRatio;return e.setAttribute("width",(t*a).toString()),e.setAttribute("height",(n*a).toString()),{width:t,height:n}}(t.current);return a.current=e.width,r.current=e.height,i.current=r.current/2,function(){null!==d.current&&clearTimeout(d.current)}}),[]);Object(c.useEffect)((function(){null!==d.current&&clearTimeout(d.current),e.length>0?(console.time("draw"),function t(){d.current=null,n.current.clearRect(0,0,a.current,r.current),e.forEach((function(e){var t=Ee.d.nodes.get(e.id);if(t&&t.audioNode){n.current.lineWidth=e.lineWidth;try{l(t.audioNode,e.color)}catch(a){qe.c.error(a.message)}}})),d.current=setTimeout(t,100)}(),console.timeEnd("draw")):n.current.clearRect(0,0,a.current,r.current)}),[e]);var l=function(e,t){n.current.strokeStyle=t;var r=e.frequencyBinCount,o=new Float32Array(r);e.getFloatTimeDomainData(o);var c,u,d=a.current/r,l=0;for(n.current.beginPath(),n.current.moveTo(0,i.current),u=0;u<r;u++)c=i.current+o[u]*i.current,n.current.lineTo(l,c),l+=d;n.current.lineTo(a.current,i.current),n.current.stroke()};return Object(u.d)(jt.a,{title:"Analyser's 2D Waveforms"},Object(u.d)("div",{css:{height:120,boxShadow:"inset 0 0 25px #101319"}},Object(u.d)("canvas",{ref:t,css:{width:"100%",height:"100%"}})))},gt=function(e){var t=e.playing,n=e.setPlaying;return Object(u.d)("div",null,Object(u.d)(j.a,{onClick:function(){return n(!0)},disabled:t},Object(u.d)(Ie.a,{icon:["fad","play"],fixedWidth:!0,size:"lg"})),Object(u.d)(j.a,{onClick:function(){return n(!1)},disabled:!t},Object(u.d)(Ie.a,{icon:["fad","stop"],fixedWidth:!0,size:"lg"})))},ht=function(e,t){var n=Object(c.useState)(!1),a=Object(W.a)(n,2),r=a[0],o=a[1],i=Object(c.useRef)(!1);Object(c.useEffect)((function(){var e;return null!==t&&(e=window.setInterval((function(){i.current=!i.current,o(i.current)}),t)),function(){null!==t&&window.clearInterval(e)}}),[t]),Object(c.useEffect)((function(){null!==t&&e()}),[r])};function yt(){var e=Object(y.a)(["\n        font-size: 0.8rem !important;\n        display: flex;\n        justify-content: space-between;\n        padding: 8px;\n      "]);return yt=function(){return e},e}function xt(){var e=Object(y.a)(["\n  font-size: 0.8rem !important;\n  padding: 1px 2px !important;\n  margin-left: 2px;\n"]);return xt=function(){return e},e}var wt=Object(u.c)(xt()),kt=function(){var e=Object(o.b)(),t=Object(o.c)(Be.f),n=Object(o.c)(Be.j),a=Object(o.c)(Be.i);return Object(u.d)("div",{css:Object(u.c)(yt())},Object(u.d)("div",null,"BPM:",Object(u.d)("input",{title:"BPM",css:[wt,{width:55}],type:"number",defaultValue:t,onChange:function(t){return e(Object(Be.o)(t.currentTarget.valueAsNumber))}})),Object(u.d)("div",null,"Beats:",Object(u.d)("input",{title:"Beats",css:[wt,{width:45}],type:"number",min:1,defaultValue:a,onChange:function(t){return e(Object(Be.q)(t.currentTarget.valueAsNumber))}})),Object(u.d)("div",null,"Notes/Beat:",Object(u.d)("input",{title:"Notes/Beat",css:[wt,{width:45}],type:"number",min:1,defaultValue:n,onChange:function(t){return e(Object(Be.r)(t.currentTarget.valueAsNumber))}})))},Nt=function(e){var t=e.defaultText,n=e.onChange,a=e.unchangeable,r=e.disabled,i=e.selected,d=e.title,l=Object(o.c)(Be.l),s=Object(c.useRef)(null);return Object(u.d)("select",{ref:s,value:i,disabled:r,title:d,onChange:function(e){n&&n(e.currentTarget.value),a&&(s.current.value="")}},Object(u.d)("option",{value:""},null!==t&&void 0!==t?t:"--- Please, Select ---"),l.map((function(e){return Object(u.d)("option",{key:e,value:e},e)})))};function St(){var e=Object(y.a)(["\n  border-color: #00ff00;\n"]);return St=function(){return e},e}function Tt(){var e=Object(y.a)(["\n  background-color: #fff;\n"]);return Tt=function(){return e},e}function Ct(){var e=Object(y.a)(["\n  background-color: #000;\n  border: 2px solid #333;\n  height: 35px;\n  min-width: 5px;\n"]);return Ct=function(){return e},e}function Et(){var e=Object(y.a)(["\n  background-color: #ccc;\n"]);return Et=function(){return e},e}function At(){var e=Object(y.a)(["\n  padding: 1px;\n  flex-grow: 1;\n"]);return At=function(){return e},e}var Bt=Object(u.c)(At()),Ft=Object(u.c)(Et()),Pt=Object(u.c)(Ct()),qt=Object(u.c)(Tt()),It=Object(u.c)(St()),Vt=function(e){var t=e.barId,n=e.stepNr,a=e.step,r=e.secondary,c=e.active,i=Object(o.b)();return Object(u.d)("div",{css:[Bt,r&&Ft],onClick:function(){i(Object(Be.t)({barId:t,stepNr:n,step:null===a?440:null}))}},Object(u.d)("div",{css:[Pt,null!==a&&qt,c&&It]}))};function Rt(){var e=Object(y.a)(["\n  display: flex;\n  > select {\n    padding: 0px !important;\n    font-size: 0.9rem !important;\n    width: 45px;\n  }\n"]);return Rt=function(){return e},e}function zt(){var e=Object(y.a)(["\n  width: 100%;\n  display: flex;\n  justify-items: stretch;\n  align-items: stretch;\n  background-color: #000;\n  flex-grow: 1;\n"]);return zt=function(){return e},e}var Mt=Object(u.c)(zt()),_t=Object(u.c)(Rt()),Wt=function(e){var t=e.barId,n=e.beatsPerBar,a=e.cursor,r=e.onRemove,i=Object(o.b)(),d=Object(o.c)(Be.m)(t),l=Object(o.c)(Be.k)(t),s=Object(c.useRef)(null);return Object(c.useEffect)((function(){""!==l&&setTimeout((function(){s.current=Object(Ee.c)(l)}))}),[l]),Object(c.useEffect)((function(){var e=d[a];null!==e&&(null===s.current?(i(me(null)),setTimeout((function(){i(me(e))}))):(s.current.stop(),s.current.play(e,.01)))}),[a]),Object(u.d)("div",{css:_t},Object(u.d)(Nt,{selected:l,onChange:function(e){i(Object(Be.s)({barId:t,soundName:e}))},defaultText:"Editor Sound",title:"Bar's Instrument"}),Object(u.d)("div",{css:Mt},d.map((function(e,r){return Object(u.d)(Vt,{key:r.toString(),step:e,barId:t,stepNr:r,secondary:Math.floor(r/n)%2!==0,active:a===r})}))),Object(u.d)(j.a,{onClick:r,title:"Remove Bar"},Object(u.d)(Ie.a,{icon:["fad","layer-minus"]})))},Gt=function(){var e=Object(o.b)(),t=Object(o.c)(Be.g),n=Object(o.c)(Be.f),a=Object(o.c)(Be.j),r=Object(o.c)(Be.i),i=Object(o.c)(Be.n),d=Object(o.c)(Be.h),l=Object(o.c)(ie),s=1*i,f=1*r,b=Object(c.useMemo)((function(){return 60/n*1e3*f}),[60,n,f]),p=Object(c.useMemo)((function(){return b/s}),[b,s]),O=Object(c.useState)(0),m=Object(W.a)(O,2),v=m[0],g=m[1],h=Object(c.useState)(!1),y=Object(W.a)(h,2),x=y[0],w=y[1],k=Object(c.useState)(!1),N=Object(W.a)(k,2),S=N[0],T=N[1];return ht((function(){g(v<s-1?v+1:0)}),x?p:null),Object(c.useEffect)((function(){v>i&&g(0)}),[i]),Object(c.useEffect)((function(){x||Ee.d.stop()}),[x]),Object(c.useEffect)((function(){localStorage.setItem("sequencer",JSON.stringify({BPM:n,notesPerBeat:a,beatsPerBar:r,bars:d}))}),[n,a,r,d]),Object(u.d)(jt.a,{title:"Sequencer"},Object(u.d)("div",{css:{display:"flex",justifyContent:"space-between",alignItems:"center"}},Object(u.d)(gt,{playing:x,setPlaying:w}),Object(u.d)("div",null,Object(u.d)(j.a,{onClick:function(){return T(!S)},title:"Open/Close Bar Settings"},Object(u.d)(Ie.a,{icon:["fad","cogs"]})),Object(u.d)(j.a,{onClick:function(){e(Object(Be.a)(l))},title:"Add Bar"},Object(u.d)(Ie.a,{icon:["fad","layer-plus"]})))),S&&Object(u.d)(kt,null),Object(u.d)("div",null,t.map((function(t){return Object(u.d)(Wt,Object.assign({key:t},{cursor:v,beatsPerBar:r,barId:t},{onRemove:function(){e(Object(Be.c)(t))}}))}))))};function Lt(){var e=Object(y.a)(["\n  display: flex;\n  align-items: center;\n  font-size: 3rem;\n  justify-content: center;\n  user-select: none;\n  padding-bottom: 0.5rem;\n\n  > div {\n    flex: 1;\n    position: relative;\n    height: 150px;\n    margin: 0 1px;\n    border: 1px solid #999;\n    border-radius: 1px 1px 5px 5px;\n    box-shadow: 2px 2px 5px #0006;\n    cursor: pointer;\n    background-color: #aaa;\n    &:hover {\n      background-color: #999;\n    }\n    &:active {\n      background-color: #888;\n    }\n    &::after {\n      position: absolute;\n      bottom: 0.3rem;\n      width: 100%;\n      text-align: center;\n      content: attr(data-note);\n      font: 500 1.6rem Candara;\n      color: #121212;\n    }\n  }\n\n  > div > div {\n    position: absolute;\n    top: -1px;\n    left: 70%;\n    height: 105px;\n    width: calc(60% + 2px);\n    border-radius: 1px 1px 5px 5px;\n    box-shadow: 2px 2px 5px #0006;\n    cursor: pointer;\n    z-index: 10;\n    background-color: #000;\n    &:hover {\n      background-color: #111;\n    }\n    &:active {\n      background-color: #222;\n    }\n  }\n"]);return Lt=function(){return e},e}var Dt=x.a.div(Lt()),Jt=function(){var e=Object(o.b)(),t=Object(c.useRef)(null),n=function(n){if(1===n.buttons){var a=n.target.getAttribute("data-frequency"),r=null!==a?+a:null;t.current!==r&&(e(me(null!==a?+a:null)),t.current=r)}},a=function(){null!==t.current&&(e(me(null)),t.current=null)};return i.a.createElement(jt.a,{title:"Current Sound Tones"},i.a.createElement(Dt,{onMouseDown:n,onMouseMove:n,onMouseUp:a,onMouseOut:a},i.a.createElement("div",{"data-frequency":"261.626","data-note":"C"},i.a.createElement("div",{"data-frequency":"277.18","data-note":"C#"})),i.a.createElement("div",{"data-frequency":"293.665","data-note":"D"},i.a.createElement("div",{"data-frequency":"311.127"})),i.a.createElement("div",{"data-frequency":"329.628","data-note":"E"}),i.a.createElement("div",{"data-frequency":"349.228","data-note":"F"},i.a.createElement("div",{"data-frequency":"369.994"})),i.a.createElement("div",{"data-frequency":"391.995","data-note":"G"},i.a.createElement("div",{"data-frequency":"415.305"})),i.a.createElement("div",{"data-frequency":"440.000","data-note":"A"},i.a.createElement("div",{"data-frequency":"466.164"})),i.a.createElement("div",{"data-frequency":"493.883","data-note":"B"}),i.a.createElement("div",{"data-frequency":"523.251","data-note":"C"},i.a.createElement("div",{"data-frequency":"554.365"})),i.a.createElement("div",{"data-frequency":"587.330","data-note":"D"},i.a.createElement("div",{"data-frequency":"622.254"})),i.a.createElement("div",{"data-frequency":"659.255","data-note":"E"}),i.a.createElement("div",{"data-frequency":"698.457","data-note":"F"},i.a.createElement("div",{"data-frequency":"739.989"})),i.a.createElement("div",{"data-frequency":"783.991","data-note":"G"},i.a.createElement("div",{"data-frequency":"830.609"})),i.a.createElement("div",{"data-frequency":"880.000","data-note":"A"},i.a.createElement("div",{"data-frequency":"932.328"})),i.a.createElement("div",{"data-frequency":"987.767","data-note":"B"}),i.a.createElement("div",{"data-frequency":"1046.50","data-note":"C"})))};function Ut(){var e=Object(y.a)(["\n        text-align: center;\n        font-family: Tomorrow;\n        padding: 2px;\n        opacity: 0.25;\n        transition: 100ms;\n        &:hover {\n          opacity: 1;\n          transition: 3s;\n          transition-timing-function: steps(6, end);\n        }\n      "]);return Ut=function(){return e},e}var Ht=function(){return Object(u.d)("div",{className:"brand",css:Object(u.c)(Ut())},Object(u.d)("h1",{css:{fontSize:"2rem",margin:0,color:"#f2f4f7"}},"WAA",Object(u.d)("span",{css:{fontFamily:"Roboto",fontSize:"2.6rem",fontWeight:600,position:"relative",lineHeight:0}},"\u03c0"),"Synth",Object(u.d)("span",{css:{marginLeft:4,fontSize:"0.8rem",color:"#d9dbde"}},"v","0.2.3-4")))},Kt=function(){var e=Object(o.b)(),t=Object(o.c)(ie),n=Object(c.useRef)(null),a=Object(c.useState)(!1),r=Object(W.a)(a,2),i=r[0],d=r[1],l=Object(o.c)(ue),s=Object(ne.l)((function(e){return e.elements}));Object(c.useEffect)((function(){i||(n.current.value=t)}),[t]),Object(c.useEffect)((function(){return function(){return f()}}),[]);var f=function(){var e=function(e){var t;return Object(h.a)(Object(h.a)({},e),{},{position:null===(t=s.find((function(t){return t.id===e.id})))||void 0===t?void 0:t.__rf.position})};try{localStorage.setItem(t||"No Name",JSON.stringify({destination:e({id:"destination",connectIds:[]}),analysers:l.analysers.flatMap(e),gains:l.gains.flatMap(e),biquadFilters:l.biquadFilters.flatMap(e),oscillators:l.oscillators.flatMap(e)})),qe.c.success('Sound "'.concat(t,'" saved'))}catch(n){qe.c.error(n.message)}};return Object(u.d)(jt.a,{title:"Current Sound Name"},Object(u.d)("div",{css:{display:"flex"}},i?Object(u.d)(Nt,{onChange:function(t){f();var n=localStorage.getItem(t);if(n){Ee.d.destroyAudioNodes();var a=JSON.parse(n);if(Object(Ze.c)(a)){e(Oe(t)),e(ge());var r=function(e,t,n){return{id:e.id,type:t,className:"audioNode",position:e.position,data:n}},o=function(e,t){return{source:e,target:t,id:"reactflow__edge-".concat(e,"-").concat(t),type:"default"}},c=[];return a.analysers.forEach((function(t){c.push(r(t,"analyser",Object(h.a)({},t))),delete t.position,t.connectIds.forEach((function(e){c.push(o(t.id,e))})),e(he(t))})),a.gains.forEach((function(t){c.push(r(t,"gain",Object(h.a)({},t))),delete t.position,t.connectIds.forEach((function(e){c.push(o(t.id,e))})),e(xe(t))})),a.biquadFilters.forEach((function(t){c.push(r(t,"biquadfilter",Object(h.a)({},t))),delete t.position,t.connectIds.forEach((function(e){c.push(o(t.id,e))})),e(ke(t))})),a.oscillators.forEach((function(t){c.push(r(t,"oscillator",Object(h.a)({},t))),delete t.position,t.connectIds.forEach((function(e){c.push(o(t.id,e))})),e(Se(t))})),c.push(Object(h.a)(Object(h.a)({},lt),{},{position:a.destination.position})),e(ee(c)),d(!1),void qe.c.success('Sound "'.concat(t,'" loaded'))}}qe.c.error('Error loading "'.concat(t,'" sound'))},unchangeable:!0}):Object(u.d)("input",{ref:n,type:"text",defaultValue:t,onChange:function(t){return e(Oe(t.target.value))},onFocus:function(e){return e.target.select()}}),Object(u.d)(j.a,{onClick:function(){return d(!i)},title:"Toggle Select"},Object(u.d)(Ie.a,{icon:["fad","disc-drive"],fixedWidth:!0,size:"lg"})),Object(u.d)(j.a,{onClick:function(){f(),e(Oe("No Name")),e(ge()),e(ee([])),e(Object(Be.e)()),d(!1),localStorage.clear(),qe.c.success("Create New Sound")},title:"Create New Sound"},Object(u.d)(Ie.a,{icon:["fad","file"],fixedWidth:!0,size:"lg"}))))},Qt=n(37),Xt={TOGGLE_EDIT_MODE:"m",DEL_SELECTED:"del"};function Zt(){var e=Object(o.b)(),t=Object(o.c)(H),n={TOGGLE_EDIT_MODE:function(t){return e(Z())},DEL_SELECTED:function(t){return e($())}};return Object(u.d)(ne.f,null,Object(u.d)(Pe.HotKeys,{keyMap:Xt,handlers:n},Object(u.d)(j.b,{className:t?"rev":""},Object(u.d)(st,null),Object(u.d)(j.d,null,Object(u.d)(Ht,null),Object(u.d)(Qt.a,null),Object(u.d)(mt,null),Object(u.d)(Kt,null),Object(u.d)(vt,null),Object(u.d)(Jt,null),Object(u.d)(Gt,null))),Object(u.d)(qe.b,{position:t?qe.c.POSITION.BOTTOM_LEFT:qe.c.POSITION.BOTTOM_RIGHT,transition:qe.a,limit:2,autoClose:2200})))}m.b.add(b.a,p.a,s.a,O.a,f.a),r.a.render(i.a.createElement(c.Fragment,null,i.a.createElement(u.a,{styles:j.f}),i.a.createElement(o.a,{store:Fe},i.a.createElement(Zt,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/synth",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/synth","/service-worker.js");d?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):l(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):l(t,e)}))}}()},8:function(e,t,n){"use strict";n.d(t,"f",(function(){return f})),n.d(t,"b",(function(){return b})),n.d(t,"d",(function(){return p})),n.d(t,"c",(function(){return O})),n.d(t,"e",(function(){return m})),n.d(t,"a",(function(){return j}));var a=n(4),r=n(1),o=n(12);function c(){var e=Object(a.a)(["\n  background-color: transparent !important;\n  width: auto !important;\n  flex-shrink: 1 !important;\n  flex-grow: 0 !important;\n  border-width: 1px !important;\n  opacity: 0.5;\n  cursor: not-allowed !important;\n\n  div {\n    display: inline-block;\n    margin-left: 8px;\n    font-size: 0.8rem;\n    position: relative;\n  }\n\n  &:not([disabled]) {\n    cursor: pointer !important;\n    opacity: 1;\n    svg {\n      transition: 50ms;\n    }\n    &:hover {\n      svg {\n        transition: 50ms;\n        transform: scale(1.25);\n      }\n      div {\n        font-size: 0.85rem;\n        top: 1px;\n      }\n    }\n  }\n"]);return c=function(){return e},e}function i(){var e=Object(a.a)(["\n  padding: 8px 6px;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n\n  > div {\n    align-items: center;\n    display: flex;\n    gap: 8px;\n  }\n"]);return i=function(){return e},e}function u(){var e=Object(a.a)(["\n  top: 0;\n  right: 0;\n  width: 380px;\n  position: fixed;\n  z-index: 200;\n  background-color: #000;\n  padding: 25px;\n  border-bottom-left-radius: 4px;\n  box-shadow: 5px 5px 15px 5px #000000;\n\n  a {\n    color: #66f;\n  }\n\n  h2 {\n    text-align: center;\n  }\n\n  ul {\n    line-height: 28px;\n    font-size: 1.1rem;\n    padding-left: 25px;\n  }\n  li {\n    margin-top: 12px;\n  }\n"]);return u=function(){return e},e}function d(){var e=Object(a.a)(["\n  flex-grow: 1;\n  background-color: var(--side-bg);\n  color: #fff;\n  border: 0 solid #000;\n  border-left-width: 2px;\n\n  .menuOpener {\n    position: fixed;\n    top: 6px;\n    right: 6px;\n    &:hover {\n      transform: rotate(90deg);\n      transition: 500ms;\n    }\n  }\n\n  > *:not(.brand):not(.menuOpener):not(.menu) {\n    /*border-top: 2px solid #000;*/\n    background-color: var(--widget-bg);\n    color: #fff;\n\n    input,\n    select,\n    button {\n      font-size: 0.95rem;\n      flex-grow: 1;\n      border-radius: 3px;\n      background-color: transparent;\n      border: 1px solid var(--input-border);\n      font-family: Roboto;\n      padding: 6px;\n      color: #fff;\n      &:focus {\n        border-color: var(--input-border-focus);\n        border-width: 2px;\n        padding: 5px;\n      }\n    }\n\n    select option {\n      background-color: var(--widget-bg);\n    }\n\n    button {\n      width: 100%;\n      background-color: var(--button-bg);\n      border-width: 2px;\n      border-style: outset;\n      cursor: pointer;\n      &:focus {\n        padding: 6px;\n      }\n    }\n  }\n"]);return d=function(){return e},e}function l(){var e=Object(a.a)(["\n  margin: 0;\n  padding: 0;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n\n  &.rev {\n    flex-direction: row-reverse;\n\n    > div:last-of-type {\n      border-left-width: 0;\n      border-right-width: 2px;\n    }\n\n    .menuOpener {\n      left: 6px;\n      right: auto;\n    }\n\n    .menu {\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n      right: auto;\n      left: 0;\n    }\n  }\n"]);return l=function(){return e},e}function s(){var e=Object(a.a)(['\n  :root {\n    --graph-bg: #212d40;\n    --graph-bg-lines: #364156;\n    --side-bg: #11151c;\n    --side-default-width: 350px;\n    --widget-bg: #364156;\n    --input-border: #7d4e57;\n    --input-border-focus: #d66853;\n    --button-bg: #4f5f7d;\n    --node-bg: #11151c;\n    --node-selected-border: #d66853;\n  }\n\n  @import url("https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400&family=Tomorrow:wght@400;500&display=swap");\n  * {\n    box-sizing: border-box;\n  }\n  html,\n  body {\n    padding: 0;\n    margin: 0;\n    width: 100vw;\n    height: 100vh;\n    font-family: Roboto, sans-serif;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 16px;\n    overflow: hidden;\n  }\n']);return s=function(){return e},e}var f=Object(r.c)(s()),b=o.a.div(l()),p=o.a.div(d()),O=o.a.div(u()),m=o.a.div(i()),j=o.a.button(c())},9:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return f}));n(21),n(25);var a=n(11),r=n(41),o=n(42),c=function(e,t){return{id:e.id,connectIds:[],type:t,attrs:{},params:[]}},i=function(){function e(t){Object(r.a)(this,e),this.audioCtx=null,this.offlineCtx=new OfflineAudioContext(2,1764e3,44100),this.nodes=new Map,this.audioCtx=t}return Object(o.a)(e,[{key:"destroyAudioNodes",value:function(){this.nodes.forEach((function(e){e.audioNode=void 0})),this.nodes.clear(),this.nodes=new Map}},{key:"applyParams",value:function(e,t,n){null!==this.audioCtx&&(void 0===n&&(n=this.audioCtx.currentTime),t.forEach((function(t){var r,o=Object(a.a)(t.values);["setValueAtTime","linearRampToValueAtTime","exponentialRampToValueAtTime","setTargetAtTime","setValueCurveAtTime"].includes(t.call)&&(o[1]+=n),["cancelScheduledValues","cancelAndHoldAtTime"].includes(t.call)&&(o[0]+=n),(r=e[t.name])[t.call].apply(r,Object(a.a)(o))})))}},{key:"setGain",value:function(e){var t=this.nodes.get(e.id)||c(e,"GainNode");t.connectIds=e.connectIds,t.params=e.params,this.nodes.has(e.id)||this.nodes.set(e.id,t)}},{key:"setAnalyser",value:function(e){var t=this.nodes.get(e.id)||c(e,"AnalyserNode");t.connectIds=e.connectIds,t.attrs.fftSize=e.fftSize,void 0!==t.audioNode&&(t.audioNode.fftSize=t.attrs.fftSize),this.nodes.has(e.id)||this.nodes.set(e.id,t)}},{key:"setBiquadFilter",value:function(e){var t=this.nodes.get(e.id)||c(e,"BiquadFilterNode");t.connectIds=e.connectIds,t.attrs.type=e.type,t.params=e.params,void 0!==t.audioNode&&(t.audioNode.type=t.attrs.type),this.nodes.has(e.id)||this.nodes.set(e.id,t)}},{key:"setOscillator",value:function(e){var t=this.nodes.get(e.id)||c(e,"OscillatorNode");t.connectIds=e.connectIds,t.attrs.type=e.type,t.params=e.params,this.nodes.has(e.id)||this.nodes.set(e.id,t)}},{key:"delNode",value:function(e){this.nodes.delete(e)}},{key:"addConnect",value:function(e,t){var n=this.nodes.get(e);n&&(n.connectIds=[].concat(Object(a.a)(n.connectIds),[t]))}},{key:"delConnect",value:function(e,t){var n=this.nodes.get(e);n&&(n.connectIds=n.connectIds.filter((function(e){return e!==t})))}},{key:"play",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01;if(null!==this.audioCtx){var a=this.audioCtx.currentTime+n;this.nodes.forEach((function(n){if("OscillatorNode"===n.type)n.audioNode=t.audioCtx.createOscillator(),n.audioNode.type=n.attrs.type,n.audioNode.frequency.setValueAtTime(e,0),n.audioNode.start(a),n.startTime=a;else if(void 0===n.audioNode)switch(n.type){case"AnalyserNode":n.audioNode=t.audioCtx.createAnalyser(),n.audioNode.fftSize=n.attrs.fftSize;break;case"BiquadFilterNode":n.audioNode=t.audioCtx.createBiquadFilter(),n.audioNode.type=n.attrs.type;break;case"GainNode":n.audioNode=t.audioCtx.createGain()}n.params.length>0&&t.applyParams(n.audioNode,n.params,a)})),this.nodes.forEach((function(e){e.connectIds.forEach((function(n){e.audioNode.connect(n===d?t.audioCtx.destination:t.nodes.get(n).audioNode)}))}))}}},{key:"stop",value:function(){var e=this;null!==this.audioCtx&&this.nodes.forEach((function(t){if(void 0!==t.audioNode){if("OscillatorNode"===t.type){var n;if(void 0!==t.startTime&&t.params.every((function(e){return"frequency"!==e.name}))){var a,r,o=.5/(null!==(a=null===(r=t.attrs)||void 0===r?void 0:r.frequency)&&void 0!==a?a:440),c=e.audioCtx.currentTime-t.startTime,i=Math.floor(c/o);n=t.startTime+o*i+o}else n=e.audioCtx.currentTime;t.audioNode.stop(n)}t.connectIds.forEach((function(n){var a,r;n===d?null===(a=t.audioNode)||void 0===a||a.disconnect():null===(r=t.audioNode)||void 0===r||r.disconnect(e.nodes.get(n).audioNode)})),void 0!==t.type&&void 0!==t.audioNode&&(t.audioNode=void 0)}}))}}]),e}(),u=n(16),d="destination";AudioContext=window.AudioContext||window.webkitAudioContext;var l=new AudioContext,s=new i(l),f=function(e,t){var n=localStorage.getItem(e);if(!n)return null;var a=JSON.parse(n);if(!Object(u.c)(a))return null;var r=new i(null!==t&&void 0!==t?t:l);return a.analysers.forEach((function(e){return r.setAnalyser(e)})),a.gains.forEach((function(e){return r.setGain(e)})),a.biquadFilters.forEach((function(e){return r.setBiquadFilter(e)})),a.oscillators.forEach((function(e){return r.setOscillator(e)})),r}}},[[50,1,2]]]);